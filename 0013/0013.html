<div id="toc"></div>
<p>土壌水分センサとリレーをM5StickCで制御して、自動水やり器を作ってみました。</p>
<p>使い方は簡単で装置の設置後は、丁度いい湿り具合だと思うときにM5StickC本体横のBボタンを押すと、その湿り具合を維持するように働きます。</p>
<h2>材料について</h2>
<p>M5StickC本体のほかに、静電容量式の土壌水分センサとポンプ、それを駆動するためのリレーが必要です。</p>
<p>また、上記の部品をセットにした給水ポンプユニットも販売されているので、手軽に始めるのであればセットで買うのもアリだと思います。</p>
<ul>
<li><a href="https://www.switch-science.com/catalog/6913/">M5Stack用 水分測定センサ付き給水ポンプユニット｜スイッチサイエンス</a></li>
</ul>
<h2>サンプルコード</h2>
<script src="https://gist-it.appspot.com/https://github.com/spadr/M5/blob/main/M5StickC/auto_watering/auto_watering.ino"></script>
<ul>
<li><a href="https://github.com/spadr/M5/blob/main/M5StickC/auto_watering/auto_watering.ino">https://github.com/spadr/M5/blob/main/M5StickC/auto_watering/auto_watering.ino</a></li>
</ul>
<h2>M5StickCでの使い方</h2>
<h4>1.下記のURLからサンプルコードをダウンロードする</h4>
<ul>
<li><a href="https://github.com/spadr/M5">https://github.com/spadr/M5</a></li>
</ul>
<p><img alt="alt" src="/media/post_content_images/0006_05.jpg" /></p>
<p>写真上部の矢印が指す"Code"をクリックしてメニューを出し、その中の"Download ZIP"をクリックするとダウンロード出来ます。ZIPファイルは任意のフォルダーにダウンロードして解凍して下さい。</p>
<h4>2.サンプルコードをM5StickCに書き込む</h4>
<p>上の手順で解凍されたフォルダー内の"M5StickC/auto_watering/auto_watering.ino"をArduinoIDE等で開き、M5StickCに書き込みます。</p>
<h4>3.GroveでユニットとM5StickCを接続する</h4>
<p>Groveに接続してください。</p>
<h2>CANASPAD-IoTで使う方法</h2>
<script src="https://gist-it.appspot.com/https://github.com/spadr/CANASPAD-IoT_SAMPLE/blob/main/M5StickC/auto_watering/auto_watering.ino"></script>
<ul>
<li><a href="https://github.com/spadr/CANASPAD-IoT_SAMPLE/blob/main/M5StickC/auto_watering/auto_watering.ino">https://github.com/spadr/CANASPAD-IoT_SAMPLE/blob/main/M5StickC/auto_watering/auto_watering.ino</a></li>
</ul>
<p>Githubにもサンプルコードを記載しています。</p>
<h2>土壌水分の推移</h2>
<p>データ収集中</p>
<p><img alt="alt" src="/media/post_content_images/0013_02.jpg" /></p>
<p>測定開始から約一週間経過しました。</p>
<p>センサの測定値は閾値に設定された1780よりも低い値で推移しており、用土の水分量も十分でした。また、この一週間で約2Lの水を消費しました。</p>
<h2>栽培の様子</h2>
<p>データ収集中</p>
<p>メロンを栽培しています</p>
<p><img alt="alt" src="/media/post_content_images/0013_01.jpg" /></p>
<p><img alt="alt" src="/media/post_content_images/0013_00.jpg" /></p>
<h2>おわりに</h2>
<p>今回は植物の水やりの自動化を題材にしてCANASPAD-IoTのチュートリアルを作成しました。</p>
<p>CANASPAD-IoTはマイコンを使ってIoTをプロトタイプしたり、センシングデータから相関ルールを探索するために便利なサービスです。無料なのでぜひご利用ください。</p>